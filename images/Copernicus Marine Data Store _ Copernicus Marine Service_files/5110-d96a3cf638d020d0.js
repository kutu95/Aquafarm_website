!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cf405594-5be5-4d0f-8e90-cb1c49e4b6b0",e._sentryDebugIdIdentifier="sentry-dbid-cf405594-5be5-4d0f-8e90-cb1c49e4b6b0")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5110],{95110:(e,t,a)=>{a.d(t,{A:()=>ec});var s=a(31085),i=a(93243),n=a.n(i),l=a(14041),r=a(70541),o=a(64104),c=a(8953),d=a(31242),h=a(24626),u=a(7350),m=a.n(u),x=a(38221),p=a.n(x),f=a(99870),b=a.n(f),g=a(20409),j=a(55065),v=a(49608),_=a(2990),w=a(88358),y=a(41821),k=a(83832),N=a(81864),S=a(20084),C=a(19416),A=a(59916),E=a(41723),I=a(99420),T=a.n(I),M=a(77118);let L=e=>({[j.FAVORITES_FACET]:e.$t({id:"facet.favoritesHint",defaultMessage:"Show only favourite products"}),[j.VERT_LEVELS_FACET]:e.$t({id:"facet.vertLevelsHint",defaultMessage:"Show only products with depth"})}),F="__ALL__",R="__NONE__";class U extends l.Component{componentDidUpdate(e){var t,a,s,i,n,l,r,o;let{begin:c,end:d}=this.props.dateRangeQuery;null==c&&e.dateRangeQuery.begin&&(null===(a=this.refDateBegin)||void 0===a||null===(t=a.current)||void 0===t||t.setValue(null)),null==d&&e.dateRangeQuery.end&&(null===(i=this.refDateEnd)||void 0===i||null===(s=i.current)||void 0===s||s.setValue(null));let{begin:u,end:m}=this.props.elevationRangeQuery;null==u&&null!=e.elevationRangeQuery.begin&&(null===(l=this.refElevationBegin)||void 0===l||null===(n=l.current)||void 0===n||n.setValue(null)),null==m&&null!=e.elevationRangeQuery.end&&(null===(o=this.refElevationEnd)||void 0===o||null===(r=o.current)||void 0===r||r.setValue(null));let{facetValues:x}=this.props,{collapsedFacets:p}=this.state,f=(0,h.omit)(p,Object.keys(x));f!==p&&this.setState({collapsedFacets:f})}render(){let{facetResults:e}=this.props,t=Object.keys(e);return t.sort(D),(0,s.jsxs)(s.Fragment,{children:[this.renderFreeTextSearch(),t.map(this.renderFacet)]})}renderFreeTextSearch(){let{intl:e,freeTextQuery:t}=this.props;return(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" facet",children:[(0,s.jsx)("div",{className:"jsx-".concat(V.__hash)+" "+(b()("facet-name",{active:!!t})||""),children:e.formatMessage({id:"facet.freeTextSearch",defaultMessage:"Free-text search"}).toUpperCase()}),(0,s.jsx)("input",{type:"text",value:t,onChange:this.onChangeQuery,placeholder:e.$t({id:"facet.freeTextPlaceholder",defaultMessage:"Free text"}),className:"jsx-".concat(V.__hash)+" free-text"}),(0,s.jsx)(n(),{id:V.__hash,children:V})]})}renderAllNoneValue(e,t,a){let{setFacetValue:i}=this.props,l=a===F,r=a===R,c=t[F],d=t[R];if(!a||a===F||a===R)return(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" facet-value",children:[c>0&&(0,s.jsxs)("span",{onClick:()=>i(e,l?void 0:F),className:"jsx-".concat(V.__hash)+" all-none-item",children:[(0,s.jsx)("span",{className:"jsx-".concat(V.__hash)+" "+(b()("facet-value-label",{active:l})||""),children:(0,s.jsx)(o.A,{id:"facet.allValue",defaultMessage:"All"})}),(0,s.jsx)("span",{className:"jsx-".concat(V.__hash)+" facet-value-occurrences",children:c})]})," ",d>0&&(0,s.jsxs)("span",{onClick:()=>i(e,r?void 0:R),className:"jsx-".concat(V.__hash)+" all-none-item",children:[(0,s.jsx)("span",{className:"jsx-".concat(V.__hash)+" "+(b()("facet-value-label",{active:r})||""),children:(0,s.jsx)(o.A,{id:"facet.noneValue",defaultMessage:"None"})}),(0,s.jsx)("span",{className:"jsx-".concat(V.__hash)+" facet-value-occurrences",children:d})]}),(0,s.jsx)(n(),{id:V.__hash,children:V})]},F)}renderDateRangeSearch(){let{intl:e,dateRangeQuery:t}=this.props,a="dateRange",i=!!this.state.collapsedFacets[a];return(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" facet",children:[(0,s.jsxs)("div",{onClick:()=>this.onToggleCollapse(a),className:"jsx-".concat(V.__hash)+" facet-name clickable",children:[e.formatMessage({id:"facet.timeRange",defaultMessage:"Time range"}).toUpperCase(),"\xa0\xa0",(0,s.jsx)(g.Icon,{icon:i?"caret-down":"caret-up"})]}),(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" "+(b()("facet-body",{hidden:i})||""),children:[(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" range-row",children:[(0,s.jsx)(g.DateInput,{ref:this.refDateBegin,className:b()("facet-input",{active:!!t.begin}),utc:!0,type:"native",value:this.initialDateBegin,onChange:(e,t)=>{let a=null!=t?T().utc(t).format("YYYY-MM-DD"):null;this.props.setDateRangeQuery({begin:a})}}),(0,s.jsx)(g.DateInput,{ref:this.refDateEnd,className:b()("facet-input",{active:!!t.end}),utc:!0,type:"native",value:this.initialDateEnd,onChange:(e,t)=>{let a=null!=t?T().utc(t).format("YYYY-MM-DD"):null;this.props.setDateRangeQuery({end:a})}})]}),(0,s.jsx)("div",{onClick:()=>this.props.setDateRangeQuery({coverFull:!t.coverFull}),className:"jsx-".concat(V.__hash)+" facet-value",children:(0,s.jsx)("span",{title:t.coverFull?e.$t({id:"facet.removeFilterHint",defaultMessage:"Remove filter"}):e.$t({id:"facet.timeRangeFullIntervalHint",defaultMessage:"Show only those products which have data over the full time range that you specify. If the product only covers part of the interval, it will not be shown."}),className:"jsx-".concat(V.__hash)+" "+(b()("facet-value-label",{active:t.coverFull})||""),children:(0,s.jsx)(o.A,{id:"facet.timeRangeFullInterval",defaultMessage:"Covering full interval"})})})]}),(0,s.jsx)(n(),{id:V.__hash,children:V})]},"facet-date-range")}renderElevationRangeSearch(){let{intl:e,elevationRangeQuery:t}=this.props,a="elevationRange",i=!!this.state.collapsedFacets[a];return(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" facet",children:[(0,s.jsxs)("div",{onClick:()=>this.onToggleCollapse(a),className:"jsx-".concat(V.__hash)+" facet-name clickable",children:[e.formatMessage({id:"facet.depthRange",defaultMessage:"Depth range"}).toUpperCase(),"\xa0\xa0",(0,s.jsx)(g.Icon,{icon:i?"caret-down":"caret-up"})]}),(0,s.jsx)("div",{className:"jsx-".concat(V.__hash)+" "+(b()("facet-body",{hidden:i})||""),children:(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" range-row",children:[(0,s.jsx)(g.NumberInput,{ref:this.refElevationBegin,className:b()("facet-input",{active:null!=t.begin}),value:this.initialElevationBegin,onChange:(e,t)=>{this.props.setElevationRangeQuery({begin:null!=t?-t:null})}}),(0,s.jsx)(g.NumberInput,{ref:this.refElevationEnd,className:b()("facet-input",{active:null!=t.end}),value:this.initialElevationEnd,onChange:(e,t)=>{this.props.setElevationRangeQuery({end:null!=t?-t:null})}})]})}),(0,s.jsx)(n(),{id:V.__hash,children:V})]},"facet-elevation-range")}renderBooleanFacet(e){let{intl:t,facetValues:a}=this.props,i=this.props.facetResults[e];if((null==i?void 0:i.true)!=null&&(i=i.true),"number"!=typeof i)return null;let l="true"===a[e];if(!l&&0===i)return null;let r=l?t.$t({id:"facet.removeFilterHint",defaultMessage:"Remove filter"}):L(t)[e];return(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" facet",children:[(0,s.jsxs)("div",{onClick:()=>this.props.setFacetValue(e,l?void 0:"true"),title:r,className:"jsx-".concat(V.__hash)+" "+(b()("facet-name clickable",{active:l})||""),children:[(0,j.FACET_NAMES)(t)[e].toUpperCase(),e===j.FAVORITES_FACET?(0,s.jsxs)(s.Fragment,{children:["\xa0\xa0",(0,s.jsx)(g.Icon,{icon:"star"}),"\xa0\xa0"]}):(0,s.jsx)(s.Fragment,{children:"\xa0\xa0"}),(0,s.jsx)("span",{className:"jsx-".concat(V.__hash)+" facet-value-occurrences",children:i})]}),(0,s.jsx)(n(),{id:V.__hash,children:V})]},e)}constructor(e){super(e),this.refDateBegin=l.createRef(),this.refDateEnd=l.createRef(),this.refElevationBegin=l.createRef(),this.refElevationEnd=l.createRef(),this.state={collapsedFacets:j.FACET_INITIAL_COLLAPSE_STATUS},this.renderFacet=e=>{if(e===j.TIME_RANGE_FACET)return this.renderDateRangeSearch();if(e===j.VERT_LEVELS_FACET||e===j.FAVORITES_FACET||e===j.EXTERNAL_FACET)return this.renderBooleanFacet(e);if(e===j.ELEVATION_RANGE_FACET)return this.renderElevationRangeSearch();let{intl:t,facetValues:a,setFacetValue:i}=this.props,l=a[e],r=!!this.state.collapsedFacets[e],c=this.props.facetResults[e];null!=l&&null==c[String(l)]&&(c=(0,h.set)(c,String(l),0));let d=Object.keys(c).filter(e=>e!==R&&(c[e]>0||l===e||e===F&&(c[F]>0||c[R]>0)));if(!d.length&&!l)return null;switch(e){case"colors":d.sort(M.SX);break;case"areas":d.sort(O);break;case"times":d.sort(M.o_);break;case"sources":d.sort(M.w);break;case"tempResolutions":d.sort(M.uQ);break;default:d.sort(z(t))}return(0,s.jsxs)("div",{className:"jsx-".concat(V.__hash)+" facet",children:[(0,s.jsxs)("div",{onClick:()=>this.onToggleCollapse(e),title:r?t.$t({id:"facet.showValuesHint",defaultMessage:"Show facet values"}):t.$t({id:"facet.hideValuesHint",defaultMessage:"Hide facet values"}),className:"jsx-".concat(V.__hash)+" facet-name clickable",children:[(0,j.FACET_NAMES)(t)[e].toUpperCase(),"\xa0\xa0",(0,s.jsx)(g.Icon,{icon:r?"caret-down":"caret-up"})]}),!r&&d.map(a=>{var n,r;let d=a===l,h=c[a],u=a===F;return u?this.renderAllNoneValue(e,c,l):h||d?(0,s.jsxs)("div",{onClick:()=>i(e,d?void 0:a),title:d?t.$t({id:"facet.removeFilterHint",defaultMessage:"Remove filter"}):t.$t({id:"facet.addFilterHint",defaultMessage:"Add filter"}),className:"jsx-".concat(V.__hash)+" facet-value",children:[(0,s.jsx)("span",{className:"jsx-".concat(V.__hash)+" "+(b()("facet-value-label",{active:d})||""),children:u?(0,s.jsx)(o.A,{id:"facet.allValue",defaultMessage:"All"}):null!==(r=null===(n=j.FACET_VALUE_TRANSLATIONS[a])||void 0===n?void 0:n.call(j.FACET_VALUE_TRANSLATIONS,t))&&void 0!==r?r:a})," ",(0,s.jsx)("span",{className:"jsx-".concat(V.__hash)+" facet-value-occurrences",children:h})]},a):null}),(0,s.jsx)(n(),{id:V.__hash,children:V})]},e)},this.onChangeQuery=e=>{this.props.setFreeTextQuery(e.target.value)},this.onToggleCollapse=e=>{let t=!this.state.collapsedFacets[e],{collapsedFacets:a}=this.state;a=t?(0,h.set)(a,e,!0):(0,h.omit)(a,e),this.setState({collapsedFacets:a})};let{begin:t,end:a}=e.dateRangeQuery;this.initialDateBegin=t?new Date(t):null,this.initialDateEnd=a?new Date(a):null;let{begin:i,end:r}=e.elevationRangeQuery;this.initialElevationBegin=null!=i?i:null,this.initialElevationEnd=null!=r?r:null}}let D=(e,t)=>j.FACETS.indexOf(e)<j.FACETS.indexOf(t)?-1:1,z=e=>(t,a)=>{var s,i,n,l;let r=null!==(n=null===(s=j.FACET_VALUE_TRANSLATIONS[t])||void 0===s?void 0:s.call(j.FACET_VALUE_TRANSLATIONS,e))&&void 0!==n?n:t,o=null!==(l=null===(i=j.FACET_VALUE_TRANSLATIONS[a])||void 0===i?void 0:i.call(j.FACET_VALUE_TRANSLATIONS,e))&&void 0!==l?l:a;return r.toLowerCase()<o.toLowerCase()?-1:1},O=(e,t)=>{let a="Global Ocean"===e?".first!!":e,s="Global Ocean"===t?".first!!":t;return a===s?0:a<s?-1:1},V=new String('.facet.jsx-c9dbeae4c20dc630{}.facet.jsx-c9dbeae4c20dc630+.facet.jsx-c9dbeae4c20dc630{margin-top:20px}.facet-name.jsx-c9dbeae4c20dc630{color:var(--color-dim);letter-spacing:1.3px;font-size:.8rem}.facet-name.clickable.jsx-c9dbeae4c20dc630{cursor:pointer}.facet-value-label.jsx-c9dbeae4c20dc630{margin-right:.3em}.facet-name.active.jsx-c9dbeae4c20dc630,.facet-value-label.active.jsx-c9dbeae4c20dc630{color:var(--color-icon-button-active);font-weight:bold}.facet-value.jsx-c9dbeae4c20dc630{font-size:.8rem;cursor:pointer}.facet-value-occurrences.jsx-c9dbeae4c20dc630{color:var(--color-dim);font-weight:300}.all-none-item.jsx-c9dbeae4c20dc630+.all-none-item.jsx-c9dbeae4c20dc630{margin-left:.5em}.all-none-item.jsx-c9dbeae4c20dc630+.all-none-item.jsx-c9dbeae4c20dc630::before{content:"\xb7";margin-right:.5em;color:var(--color-dim)}.free-text.jsx-c9dbeae4c20dc630{font-size:.8rem;width:100%}.facet-body.hidden.jsx-c9dbeae4c20dc630{display:none}.range-row.jsx-c9dbeae4c20dc630{display:grid;grid-template-columns:1fr 1fr;grid-gap:4px}.range-row.jsx-c9dbeae4c20dc630 .giu-date-input-wrapper,.range-row.jsx-c9dbeae4c20dc630 .giu-number-input-wrapper{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;min-width:0px}.range-row.jsx-c9dbeae4c20dc630 .giu-date-input,.range-row.jsx-c9dbeae4c20dc630 .giu-number-input{font-size:.8rem;display:inline-block;-webkit-box-flex:1;-webkit-flex:1 0 0px;-moz-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0px;min-width:0px}.range-row.jsx-c9dbeae4c20dc630 .giu-date-input.active,.range-row.jsx-c9dbeae4c20dc630 .giu-number-input.active{color:var(--color-icon-button-active)}');V.__hash="c9dbeae4c20dc630";let B=(0,r.Ng)(e=>{let t=(0,k.o$)(e);return{freeTextQuery:(0,k.uR)(e),dateRangeQuery:(0,k.wn)(e),elevationRangeQuery:(0,k.Je)(e),facetValues:(0,k.iw)(e),facetResults:t.facetResults}},N)((0,c.Ay)(U));var P=a(55808),$=a.n(P),G=a(52191),H=a(50289),Q=a(71198);let W={"Satellite observations":e=>e.$t({id:"catalogueCard.satellite",defaultMessage:"Satellite"}),"In-situ observations":e=>e.$t({id:"catalogueCard.insitu",defaultMessage:"In-situ"}),"Numerical models":e=>e.$t({id:"catalogueCard.models",defaultMessage:"Models"})},q={"Level 2":e=>e.$t({id:"catalogueCard.level2",defaultMessage:"L2"}),"Level 3":e=>e.$t({id:"catalogueCard.level3",defaultMessage:"L3"}),"Level 4":e=>e.$t({id:"catalogueCard.level4",defaultMessage:"L4"})},Y={"Global Ocean":e=>e.$t({id:"catalogueCard.global",defaultMessage:"Global"}),"Antarctic Ocean":e=>e.$t({id:"catalogueCard.antarctic",defaultMessage:"Antarctic"}),"Arctic Ocean":e=>e.$t({id:"catalogueCard.arctic",defaultMessage:"Arctic"}),"Baltic Sea":e=>e.$t({id:"catalogueCard.baltic",defaultMessage:"Baltic"}),"Mediterranean Sea":e=>e.$t({id:"catalogueCard.medSea",defaultMessage:"Med Sea"}),"Atlantic: NW European Shelf":e=>e.$t({id:"catalogueCard.europeNW",defaultMessage:"Europe NW"}),"Atlantic: Iberia-Biscay-Ireland":e=>e.$t({id:"catalogueCard.ibi",defaultMessage:"Iberia-Biscay-Ireland"}),"Atlantic: North":e=>e.$t({id:"catalogueCard.nAtlantic",defaultMessage:"N Atlantic"})};class J extends l.Component{componentWillUnmount(){this.isUnmounted=!0}render(){let{dataset:e,standalone:t}=this.props,a=t?"/product/".concat(e.id,"/description"):"".concat(j.URLS.viewer,"?view=dataset&dataset=").concat(e.id),i="".concat(j.URLS.viewer,"?view=layers&dataset=").concat(e.id);return(0,s.jsxs)("div",{"data-sentry-component":"DatasetCard","data-sentry-source-file":"110-CatalogueListViewCard.tsx",className:"jsx-".concat(K.__hash)+" wk-dataset-card",children:[(0,s.jsxs)("div",{className:"jsx-".concat(K.__hash)+" dataset-content",children:[(0,s.jsx)("div",{title:e.id,className:"jsx-".concat(K.__hash)+" dataset-id",children:e.id}),this.renderThumbnailBlock(a,i),this.renderTitleBlock(a),this.renderMeta()]}),(0,s.jsx)(n(),{id:K.__hash,children:K})]})}renderThumbnailBlock(e,t){let{intl:a,dataset:i,standalone:l}=this.props,{isDeleting:r}=this.state,{numLayers:c,catalogue:d}=i,h=d===j.USER_CATALOGUE;return(0,s.jsxs)("div",{className:"jsx-".concat(Z.__hash)+" thumbnail-block",children:[(0,s.jsx)(G.A,{href:e,children:(0,s.jsx)(Q.A,{dataset:i,autoSize:!0})}),(0,v.nv)(i)&&(0,s.jsxs)("div",{className:"jsx-".concat(Z.__hash)+" "+(b()("thumbnail-buttons",{deleting:r})||""),children:[(0,s.jsx)(G.A,{className:"cm-thumbnail-button add-to-map",href:t,children:(0,s.jsxs)(s.Fragment,{children:[!l&&(0,s.jsx)(g.Icon,{className:"cm-add-to-map-icon",icon:"plus",family:"fas",fixedWidth:!0}),(0,s.jsxs)("span",{className:"jsx-".concat(Z.__hash)+" add-to-map-label",children:[l?(0,s.jsx)(o.A,{id:"catalogueCard.viewProductButton",defaultMessage:"View product"}):(0,s.jsx)(o.A,{id:"catalogueCard.addToMapButton",defaultMessage:"Add to map {numLayers, plural, =1 {} other {â€¦}}",values:{numLayers:c}})," "]})]})}),l&&(0,s.jsx)(G.A,{className:"cm-thumbnail-button",title:a.$t({id:"catalogueCard.downloadHint",defaultMessage:"Download data"}),href:"/product/".concat(i.id,"/services"),children:(0,s.jsx)(g.Icon,{icon:"download"})}),h&&(0,s.jsx)("div",{title:r?a.$t({id:"catalogueCard.confirmDeleteHint",defaultMessage:"Click again to confirm"}):a.$t({id:"catalogueCard.deleteHint",defaultMessage:"Delete dataset"}),onClick:()=>{this.onClickDeleteUserDataset(i.id)},className:"jsx-".concat(Z.__hash)+" "+(b()("cm-thumbnail-button btn-delete",{deleting:r})||""),children:(0,s.jsx)(g.Icon,{icon:"trash-can",family:"far"})})]}),(0,s.jsx)(n(),{id:Z.__hash,children:Z})]})}renderTitleBlock(e){let{dataset:t,isFavorite:a,standalone:i}=this.props,l=(0,v.AY)(t);return(0,s.jsxs)("div",{className:"jsx-".concat(X.__hash)+" title-block",children:[(0,s.jsx)("div",{className:"jsx-".concat(X.__hash)+" title-label",children:(0,s.jsx)(G.A,{href:e,title:l,children:(0,s.jsx)("span",{className:"jsx-".concat(X.__hash)+" title-text",children:l})})}),(0,s.jsx)("div",{className:"jsx-".concat(X.__hash)+" "+(b()("favorite-col",{favorite:a})||""),children:(0,s.jsx)(H.A,{standalone:i,dataset:t,isFavorite:a})}),(0,s.jsx)(n(),{id:X.__hash,children:X})]})}renderMeta(){return(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta",children:[this.renderMetaId(),this.renderMetaSources(),this.renderMetaGeo(),this.renderMetaTime(),this.renderMetaVariables(),this.renderUserDatasetCreationDate(),this.renderUserDatasetDeletionDate(),(0,s.jsx)(n(),{id:ee.__hash,children:ee})]})}renderMetaId(){var e;let{intl:t,dataset:a,perimeter:i}=this.props;if(!(null===(e=j.APP_CONFIG.perimeterConfigs[i])||void 0===e?void 0:e.showDatasetIdInCard))return null;let{id:l}=a,r=l.length,o=l.slice(0,r-7),c=l.slice(r-7);return(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line",children:[(0,s.jsxs)("div",{title:"".concat(l," (click to copy)"),onClick:async()=>{await navigator.clipboard.writeText(l),(0,g.notify)({type:"success",title:t.$t({id:"notif.copyProductIdSuccess",defaultMessage:"Copied product ID to your clipboard!"}),icon:"share-alt"})},className:"jsx-".concat(ee.__hash)+" meta-line-body id-line",children:[(0,s.jsx)("span",{className:"jsx-".concat(ee.__hash)+" id-ellipsis",children:o}),c]}),(0,s.jsx)(n(),{id:ee.__hash,children:ee})]})}renderUserDatasetCreationDate(){let{dataset:e}=this.props,{userDatasetDetails:t}=e;if(!t)return null;let{dateCreated:a}=t;return a?(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line",children:[(0,s.jsx)("div",{className:"jsx-".concat(ee.__hash)+" meta-line-body",children:(0,s.jsx)(o.A,{id:"catalogueCard.creationDate",defaultMessage:"Created {date}",values:{date:(0,v.Kq)(T().utc(a).valueOf(),{withTime:!0,localTime:!0})}})}),(0,s.jsx)(n(),{id:ee.__hash,children:ee})]}):null}renderUserDatasetDeletionDate(){let{dataset:e}=this.props,{userDatasetDetails:t}=e;if(!t)return null;let{deleteAt:a}=t;return a?(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line",children:[(0,s.jsx)("div",{className:"jsx-".concat(ee.__hash)+" meta-line-body",children:(0,s.jsx)(o.A,{id:"catalogueCard.deletionDate",defaultMessage:"Deletion planned {date}",values:{date:(0,v.Kq)(T().utc(a).valueOf(),{withTime:!0,localTime:!0})}})}),(0,s.jsx)(n(),{id:ee.__hash,children:ee})]}):null}renderMetaSources(){var e,t;let{intl:a,facetValues:i,dataset:l}=this.props,{sources:r,processingLevel:o}=l;if(!r||!r.length)return null;let c=r.includes("Satellite observations"),d=i.processingLevel===o;return(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line",children:[(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line-body",children:[r.map((e,t)=>{var n,l;let r=i.sources===e,o=null!==(l=null===(n=W[e])||void 0===n?void 0:n.call(W,a))&&void 0!==l?l:(0,v.JI)(a,e);return t>0&&(o=o.toLowerCase()),(0,s.jsx)("span",{onClick:()=>{let t=r?void 0:e;this.props.setFacetValue("sources",t)},className:"jsx-".concat(ee.__hash)+" "+(b()("meta-line-item",{active:r})||""),children:o},e)}),c&&o&&(0,s.jsxs)(s.Fragment,{children:[" ","(",(0,s.jsx)("span",{onClick:()=>{let e=d?void 0:o;this.props.setFacetValue("processingLevel",e)},className:"jsx-".concat(ee.__hash)+" "+(b()("meta-line-item no-comma",{active:d})||""),children:null!==(t=null===(e=q[o])||void 0===e?void 0:e.call(q,a))&&void 0!==t?t:(0,v.JI)(a,o)}),")"]})]}),(0,s.jsx)(n(),{id:ee.__hash,children:ee})]})}renderMetaGeo(){let{intl:e,facetValues:t,dataset:a}=this.props,{areas:i}=a,{vertLevels:l}=a,r=(0,v.fb)(a);if((!i||0===i.length)&&!r)return null;i.indexOf("Global Ocean")>=0&&(i=["Global Ocean"]),i.length>1&&(i=["Multi-area"]);let c="true"===t[j.VERT_LEVELS_FACET];return(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line",children:[(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line-body",children:[i.map(i=>{var n,l;let r=t.areas===i,o=null!==(l=null===(n=Y[i])||void 0===n?void 0:n.call(Y,e))&&void 0!==l?l:(0,v.JI)(e,i),c="Multi-area"===i;return(0,s.jsx)("span",{onClick:c?void 0:()=>{let e=r?void 0:i;this.props.setFacetValue("areas",e)},title:c?a.areas.join(", "):void 0,className:"jsx-".concat(ee.__hash)+" "+(b()("meta-line-item",{nonselectable:c,active:r})||""),children:o},i)}),r&&(0,s.jsx)("span",{className:"jsx-".concat(ee.__hash)+" meta-line-item nonselectable",children:r}),l&&(0,s.jsxs)(s.Fragment,{children:[" \xd7 ",(0,s.jsx)("span",{onClick:()=>{this.props.setFacetValue(j.VERT_LEVELS_FACET,c?void 0:"true")},className:"jsx-".concat(ee.__hash)+" "+(b()("meta-line-item no-comma",{active:c})||""),children:(0,s.jsx)(o.A,{id:"catalogueCard.vertLevels",defaultMessage:"{levels, plural, =1 {1 level} other {{levels} levels}}",values:{levels:l}})})]})]}),(0,s.jsx)(n(),{id:ee.__hash,children:ee})]})}renderMetaTime(){var e;let{intl:t,facetValues:a,dataset:i}=this.props,{tempResolutions:l}=i;(l=null!==(e=null==l?void 0:l.slice())&&void 0!==e?e:[]).sort(M.uQ);let r=(0,v.Sj)(t,i),o=(0,v.Sj)(t,i,{short:!0});return(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line",children:[(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line-body",children:[r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"jsx-".concat(ee.__hash)+" meta-line-item date-long no-comma nonselectable",children:r}),(0,s.jsx)("span",{className:"jsx-".concat(ee.__hash)+" meta-line-item date-short no-comma nonselectable",children:o})]}),l.map((e,i)=>{let n=a.tempResolutions===e,o=(0,v.JI)(t,e);return(r||i>=1)&&(o=o.toLowerCase()),(0,s.jsx)("span",{onClick:()=>{let t=n?void 0:e;this.props.setFacetValue("tempResolutions",t)},title:l.join(", "),className:"jsx-".concat(ee.__hash)+" "+(b()("meta-line-item",{active:n})||""),children:o},e)})]}),(0,s.jsx)(n(),{id:ee.__hash,children:ee})]})}renderMetaVariables(){let{intl:e,facetValues:t,dataset:a}=this.props,{mainVariables:i}=a;return(null==i?void 0:i.length)?(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line",children:[(0,s.jsxs)("div",{className:"jsx-".concat(ee.__hash)+" meta-line-body main-variables",children:[i.map((a,n)=>{let l=t.mainVariables===a,r=(0,v.JI)(e,a).toLowerCase();0===n&&(r=$()(r));let o="O2"===r?(0,s.jsxs)(s.Fragment,{children:["O",(0,s.jsx)("sub",{className:"jsx-".concat(ee.__hash),children:"2"})]}):r;return(0,s.jsx)("span",{onClick:()=>{let e=l?void 0:a;this.props.setFacetValue("mainVariables",e)},title:i.join(", "),className:"jsx-".concat(ee.__hash)+" "+(b()("meta-line-item",{active:l})||""),children:o},a)}),(0,s.jsx)("span",{title:e.$t({id:"catalogueCard.glossaryHint",defaultMessage:"See glossary"}),className:"jsx-".concat(ee.__hash),children:(0,s.jsx)(G.A,{href:"https://marine.copernicus.eu/glossary",className:"wk-btn-glossary",openInNewTab:!0,children:(0,s.jsx)(g.Icon,{icon:"info-circle"})})})]}),(0,s.jsx)(n(),{id:ee.__hash,children:ee})]}):null}constructor(...e){super(...e),this.state={isDeleting:!1},this.isShown=!1,this.isUnmounted=!1,this.onClickDeleteUserDataset=async e=>{let{isDeleting:t}=this.state;if(!t){this.setState({isDeleting:!0}),this.autoResetIsDeleting();return}let{intl:a}=this.props;try{await this.props.deleteUserDataset(e)}catch(e){console.error("Error deleting user dataset:",e),(0,g.notify)({type:"error",icon:"book",title:a.$t({id:"notif.catalogueDeleteError",defaultMessage:"Error deleting dataset"}),msg:e.displayMessage})}},this.autoResetIsDeleting=()=>{setTimeout(()=>{!this.isUnmounted&&this.state.isDeleting&&this.setState({isDeleting:!1})},4e3)}}}let K=new String(".wk-dataset-card.jsx-b860c4c115e54522{height:330px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.dataset-content.jsx-b860c4c115e54522{-webkit-box-flex:1;-webkit-flex:1 0 0px;-moz-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0px}.dataset-id.jsx-b860c4c115e54522{display:none;font-size:.6em;color:gray;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}@media(hover:hover){.wk-dataset-card.jsx-b860c4c115e54522:hover{}}");K.__hash="b860c4c115e54522";let Z=new String(".thumbnail-block.jsx-eb39c6faf5559ea9{position:relative;height:160px}.thumbnail-buttons.jsx-eb39c6faf5559ea9{opacity:.85;position:absolute;bottom:0;left:0;right:0;background:var(--color-button-primary-bg);border-top:1px solid var(--color-button-primary-fg);-webkit-transition:opacity ".concat(j.UI.transitionDuration,"ms;-moz-transition:opacity ").concat(j.UI.transitionDuration,"ms;-o-transition:opacity ").concat(j.UI.transitionDuration,"ms;transition:opacity ").concat(j.UI.transitionDuration,"ms;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.cm-thumbnail-button{text-align:center;padding:6px 10px}.cm-thumbnail-button+.cm-thumbnail-button{border-left:1px solid var(--color-button-primary-fg)}.cm-thumbnail-button.add-to-map{-webkit-box-flex:1;-webkit-flex:1 1 0px;-moz-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0px}.thumbnail-buttons.jsx-eb39c6faf5559ea9 a,.thumbnail-buttons.jsx-eb39c6faf5559ea9 .btn-delete.jsx-eb39c6faf5559ea9{color:var(--color-button-primary-fg);cursor:pointer}.btn-delete.deleting.jsx-eb39c6faf5559ea9{background-color:var(--color-alert)}.cm-add-to-map-icon{margin-right:.3em}@media screen and (max-width:").concat(j.UI.narrowBreak,"px){.num-layers.jsx-eb39c6faf5559ea9{display:none}}@media(hover:hover){.thumbnail-buttons.jsx-eb39c6faf5559ea9:not(.deleting){opacity:0}.wk-dataset-card:hover .thumbnail-buttons.jsx-eb39c6faf5559ea9{opacity:.85}.wk-dataset-card:hover .thumbnail-buttons.jsx-eb39c6faf5559ea9:hover{opacity:1}}"));Z.__hash="eb39c6faf5559ea9";let X=new String(".title-block.jsx-b129083e75fe4318{margin-top:5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}.title-label.jsx-b129083e75fe4318{-webkit-box-flex:1;-webkit-flex:1 0 0px;-moz-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0px;overflow:hidden;font-weight:bold;min-height:2.65em;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;margin-bottom:.25em}.title-label.jsx-b129083e75fe4318 a{color:var(--color-button-fg)}.favorite-col.jsx-b129083e75fe4318{opacity:.85;padding-right:2px;-webkit-transition:opacity ".concat(j.UI.transitionDuration,"ms;-moz-transition:opacity ").concat(j.UI.transitionDuration,"ms;-o-transition:opacity ").concat(j.UI.transitionDuration,"ms;transition:opacity ").concat(j.UI.transitionDuration,"ms}@media(hover:hover){.favorite-col.jsx-b129083e75fe4318:not(.favorite){opacity:0}.wk-dataset-card:hover .favorite-col.jsx-b129083e75fe4318{opacity:.85}}"));X.__hash="b129083e75fe4318";let ee=new String('.meta.jsx-ff9bcda0c0f0cc3b{margin-top:5px;font-size:.8rem;color:var(--color-dim)}.meta-line.jsx-ff9bcda0c0f0cc3b+.meta-line.jsx-ff9bcda0c0f0cc3b{margin-top:.2em}.meta-line-body.jsx-ff9bcda0c0f0cc3b{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;overflow:hidden}.meta-line-body.main-variables.jsx-ff9bcda0c0f0cc3b{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.meta-line-item.jsx-ff9bcda0c0f0cc3b:not(.nonselectable){cursor:pointer}.meta-line-item.jsx-ff9bcda0c0f0cc3b:not(.nonselectable):hover{color:var(--color-button-fg)}.meta-line-item.active.jsx-ff9bcda0c0f0cc3b{color:var(--color-icon-button-active)!important}.id-line.jsx-ff9bcda0c0f0cc3b{white-space:nowrap;letter-spacing:-.2px;color:#ccc;cursor:pointer}.id-line.jsx-ff9bcda0c0f0cc3b:hover{color:#bbb}.id-ellipsis.jsx-ff9bcda0c0f0cc3b{display:inline-block;vertical-align:bottom;max-width:-webkit-calc(100% - 58px);max-width:-moz-calc(100% - 58px);max-width:calc(100% - 58px);white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.date-long.jsx-ff9bcda0c0f0cc3b{display:inline}.date-short.jsx-ff9bcda0c0f0cc3b{display:none}.meta-line-item.jsx-ff9bcda0c0f0cc3b+.meta-line-item.jsx-ff9bcda0c0f0cc3b:not(.no-comma)::before{content:", ";margin-right:.1em;color:var(--color-dim);font-weight:normal}@media screen and (max-width:'.concat(j.UI.narrowBreak,"px){.date-long.jsx-ff9bcda0c0f0cc3b{display:none}.date-short.jsx-ff9bcda0c0f0cc3b{display:inline}}.wk-btn-glossary{margin-left:.6em;-webkit-transition:opacity ").concat(j.UI.transitionDuration,"ms;-moz-transition:opacity ").concat(j.UI.transitionDuration,"ms;-o-transition:opacity ").concat(j.UI.transitionDuration,"ms;transition:opacity ").concat(j.UI.transitionDuration,"ms;opacity:0;pointer-events:none;color:var(--color-dim)}@media(hover:hover){.wk-dataset-card:hover .wk-btn-glossary{opacity:1;pointer-events:auto}}"));ee.__hash="ff9bcda0c0f0cc3b";let et=(0,r.Ng)(e=>({facetValues:(0,k.iw)(e),perimeter:(0,k.o$)(e).perimeter}),N)((0,c.Ay)(J));class ea extends l.Component{componentDidMount(){setTimeout(()=>{this.props.queryDatasets()}),this.loadScrollFromUrl(),this.applyScrollToNodes(),window.addEventListener("resize",this.onResize),setTimeout(this.onResize),this.setState({isClientRendered:!0})}componentDidUpdate(e){this.state.bodyWidth||this.onResize();let t=e.catalogue.cntDirty;this.props.catalogue.cntDirty!==t&&this.props.queryDatasets()}componentWillUnmount(){window.removeEventListener("resize",this.onResize),this.isUnmounted=!0}render(){if(this.state.showLogin)return(0,s.jsx)(S.A,{onClose:()=>this.setState({showLogin:!1}),"data-sentry-element":"LoginModal","data-sentry-component":"CatalogueListView","data-sentry-source-file":"100-CatalogueListView.tsx"});let{intl:e,isInitial:t,standalone:a,catalogue:i}=this.props,{facetsShownInMobile:l}=this.state,r=!this.state.isClientRendered||null==i.foundset;return(0,s.jsxs)("section",{"data-sentry-component":"CatalogueListView","data-sentry-source-file":"100-CatalogueListView.tsx",className:"jsx-".concat(ei.__hash)+" "+(b()("catalogue",{"sidebar-shown-in-mobile":l})||""),children:[!a&&(0,s.jsx)(A.A,{isInitial:t,title:this.renderPerimeterSelector(),noTooltip:!0,noEllipsis:!0,right:(0,s.jsx)("span",{title:e.$t({id:"titleButton.copy",defaultMessage:"Copy URL"}),onClick:()=>(0,y.yp)(e),className:"jsx-".concat(ei.__hash)+" wk-icon-button",children:(0,s.jsx)(g.Icon,{icon:"share-alt"})})}),(0,s.jsx)("div",{ref:this.refFullWidthMeasurer,className:"jsx-".concat(ei.__hash)}),(0,s.jsxs)("div",{className:"jsx-".concat(ei.__hash)+" content",children:[this.renderFacetsSection(r),this.renderResultsSection(r)]}),(0,s.jsx)(n(),{id:ei.__hash,children:ei})]})}renderPerimeterSelector(){var e;let{perimeterConfigs:t}=j.APP_CONFIG;if(Object.keys(t).length<=1){let e=t[this.props.perimeter];return e?(0,s.jsxs)("div",{className:"jsx-".concat(ei.__hash)+" perimeter-selector-narrow",children:[e.label(this.props.intl),(0,s.jsx)(n(),{id:ei.__hash,children:ei})]}):null}let{fullWidth:a}=this.state,i=null!==(e=j.APP_CONFIG.perimeterSelectorBreakpoint)&&void 0!==e?e:1e3;return null!=a&&a<i?this.renderPerimeterSelectorNarrow():this.renderPerimeterSelectorWide()}renderPerimeterSelectorNarrow(){let{intl:e,perimeter:t}=this.props,{perimeterConfigs:a}=j.APP_CONFIG,i=Object.keys(a).map(t=>{let s=a[t];return{value:t,label:s.label(e)}}),l=a[t];return(0,s.jsxs)("span",{className:"jsx-".concat(ei.__hash)+" perimeter-selector-narrow",children:[l.label(e),(0,s.jsx)(E.A,{ids:["multiCatalogue"],top:2,right:-7}),(0,s.jsx)("span",{className:"jsx-".concat(ei.__hash)+" select-icon",children:(0,s.jsx)(g.Icon,{icon:"angle-down"})}),(0,s.jsx)("select",{value:t,onChange:e=>{let t=e.target.value;this.props.setPerimeter(t)},className:"jsx-".concat(ei.__hash)+" perimeter-select",children:i.map(e=>(0,s.jsx)("option",{value:e.value,className:"jsx-".concat(ei.__hash),children:e.label},e.value))}),(0,s.jsx)(n(),{id:ei.__hash,children:ei})]})}renderPerimeterSelectorWide(){let{intl:e,perimeter:t}=this.props,{perimeterConfigs:a}=j.APP_CONFIG;return(0,s.jsxs)("div",{className:"jsx-".concat(ei.__hash)+" perimeter-selector-wide",children:[Object.keys(a).map((i,n)=>{let l=a[i];return(0,s.jsxs)("div",{onClick:()=>{this.props.setPerimeter(i)},className:"jsx-".concat(ei.__hash)+" "+(b()("perimeter-item",{active:i===t})||""),children:[l.label(e),n>0&&(0,s.jsx)(E.A,{ids:["multiCatalogue"],top:2,right:-7})]},i)}),(0,s.jsx)(n(),{id:ei.__hash,children:ei})]})}renderFacetsSection(e){let{intl:t,hasCatalogueFilter:a,standalone:i}=this.props,{facetsShownInMobile:l}=this.state;return e?(0,s.jsx)("div",{className:"jsx-".concat(en.__hash)+" "+(b()("facets wk-no-scrollbar",{standalone:i})||""),children:(0,s.jsx)(n(),{id:en.__hash,children:en})}):(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)("div",{onClick:()=>this.setState({facetsShownInMobile:!1}),className:"jsx-".concat(en.__hash)+" facets-click-target"}),(0,s.jsxs)("div",{className:"jsx-".concat(en.__hash)+" "+(b()("facets wk-no-scrollbar",{"shown-sidebar":l,standalone:i})||""),children:[(0,s.jsx)("div",{className:"jsx-".concat(en.__hash)+" mobile-title",children:(0,s.jsx)(A.A,{title:(0,s.jsxs)("span",{className:"jsx-".concat(en.__hash)+" mobile-title-content",children:[(0,s.jsx)("span",{className:"jsx-".concat(en.__hash),children:(0,s.jsx)(o.A,{id:"catalogue.filtersTitle",defaultMessage:"Filters"})}),"\xa0\xa0",a&&(0,s.jsx)("div",{onClick:this.onClickClearFilters,className:"jsx-".concat(en.__hash)+" wk-button small",children:(0,s.jsx)(o.A,{id:"catalogue.clearButton",defaultMessage:"Clear"})})]}),noTooltip:!0,onClickBack:()=>this.setState({facetsShownInMobile:!l})})}),(0,s.jsxs)("h3",{className:"jsx-".concat(en.__hash)+" wk-column-title",children:[(0,s.jsx)(o.A,{id:"catalogue.filtersTitle",defaultMessage:"Filters"}),a&&(0,s.jsx)("span",{onClick:this.onClickClearFilters,title:t.$t({id:"catalogue.clearFiltersHint",defaultMessage:"Clear filters"}),className:"jsx-".concat(en.__hash)+" wk-icon-button clear-filters",children:(0,s.jsx)(g.Icon,{icon:"times-circle"})})]}),(0,s.jsx)("div",{className:"jsx-".concat(en.__hash)+" facets-content",children:(0,s.jsx)(B,{})})]}),(0,s.jsx)(n(),{id:en.__hash,children:en})]})}renderResultsSection(e){let{standalone:t}=this.props;return(0,s.jsxs)("div",{className:"jsx-".concat(el.__hash)+" "+(b()("results",{standalone:t})||""),children:[(0,s.jsx)("div",{ref:this.refBodyMeasurer,className:"jsx-".concat(el.__hash)}),e?(0,s.jsx)("div",{style:{minHeight:"100vh"},className:"jsx-".concat(el.__hash)}):this.renderNormalResultsSection(),(0,s.jsx)(n(),{id:el.__hash,children:el})]})}renderNormalResultsSection(){let{catalogue:e,standalone:t,loginStatus:a}=this.props,{perimeter:i}=e,l=j.APP_CONFIG.perimeterConfigs[i],r=(null==l?void 0:l.auth)&&"LOGGED_IN"!==a,c=this.props.hasCatalogueFilter||(null==l?void 0:l.forceGriddedLayout),d=Object.keys(e.foundset||{}),h=d.length;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h3",{className:"jsx-".concat(el.__hash)+" wk-column-title results-title",children:[(0,s.jsxs)("div",{className:"jsx-".concat(el.__hash),children:[(0,s.jsx)(o.A,{id:"catalogue.productsTitle",defaultMessage:"Products"}),(0,s.jsx)("span",{className:"jsx-".concat(el.__hash)+" "+(b()("num-results",{"fix-width":t})||""),children:e.isLoading?(0,s.jsx)(C.A,{}):h}),t&&(0,s.jsxs)("span",{className:"jsx-".concat(el.__hash)+" in-perimeter",children:[(0,s.jsx)(o.A,{id:"catalogue.inPerimeter",defaultMessage:"in"}),"\xa0\xa0",(0,s.jsx)("span",{className:"jsx-".concat(el.__hash)+" inline-perimeter-selector",children:this.renderPerimeterSelectorNarrow()})]})]}),!r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"jsx-".concat(el.__hash)+" sep"}),(0,s.jsx)("span",{title:"Filters",className:"jsx-".concat(el.__hash)+" mobile-filters-button",children:(0,s.jsx)(g.Icon,{className:b()("wk-icon-button",{active:this.props.hasCatalogueFilter}),icon:"search",onClick:()=>this.setState({facetsShownInMobile:!0})})})]})]}),r?this.renderLoginPrompt():this.renderResults(d,c),(0,s.jsx)(n(),{id:el.__hash,children:el})]})}renderLoginPrompt(){return(0,s.jsxs)("div",{className:"jsx-".concat(el.__hash)+" log-in",children:[(0,s.jsx)("p",{className:"jsx-".concat(el.__hash)+" instructions",children:(0,s.jsx)(o.A,{id:"share.logInPrompt",defaultMessage:"Please log in to access this feature."})}),(0,s.jsx)("p",{className:"jsx-".concat(el.__hash),children:(0,s.jsx)("div",{onClick:this.onClickLogIn,className:"jsx-".concat(el.__hash)+" wk-button primary",children:(0,s.jsx)(o.A,{id:"share.logInButton",defaultMessage:"Log in"})})}),(0,s.jsx)(n(),{id:el.__hash,children:el})]})}renderResults(e,t){return 0===e.length?this.renderZeroResults():t?this.renderResultsGrid():this.renderResultsRowSections()}renderZeroResults(){return(0,s.jsx)(g.LargeMessage,{children:(0,s.jsx)(o.A,{id:"catalogue.zeroResults",defaultMessage:"No result! Try removing a filter"})})}renderResultsGrid(){let{bodyWidth:e}=this.state,{foundset:t}=this.props.catalogue,a=Object.keys(t||{});return(0,s.jsxs)("div",{className:"jsx-".concat(er.__hash)+" "+(b()("dataset-cards",{narrow:e&&e<=476})||""),children:[a.map(e=>this.renderCard(e)),(0,s.jsx)(n(),{id:er.__hash,children:er})]})}renderResultsRowSections(){return(0,s.jsxs)("div",{className:"jsx-".concat(eo.__hash)+" catalogue-sections",children:[j.CATALOGUE_SECTIONS.map(this.renderResultsRowSection),(0,s.jsx)(n(),{id:eo.__hash,children:eo})]})}renderCard(e,t,a){let{favoriteIds:i,catalogue:n,standalone:l}=this.props,r=(i||[]).indexOf(e)>=0,o=(n.foundset||{})[e];return o?(0,s.jsx)("div",{className:b()("dataset-card",{narrow:t}),style:a,children:(0,s.jsx)(et,{dataset:o,isFavorite:r,standalone:l})},e):null}loadScrollFromNodes(){let e={};j.CATALOGUE_SECTIONS.forEach(t=>{var a;let s=null===(a=this.refScrollers[t])||void 0===a?void 0:a.current;s&&(e[t]=s.scrollLeft)}),this.scrollPositions=e}loadScrollFromUrl(){let e={},{query:t}=this.props.router;j.CATALOGUE_SECTIONS.forEach(a=>{let s=t["_scrollLeft-".concat(a)];if(!s)return;let i=Number(s);e[a]=i}),this.scrollPositions=e}async applyScrollToNodes(){await (0,_.a)(()=>Object.keys(this.refScrollers).length>0),j.CATALOGUE_SECTIONS.forEach(e=>{var t;let a=this.scrollPositions[e];if(!a)return;let s=null===(t=this.refScrollers[e])||void 0===t?void 0:t.current;s&&(s.scrollLeft=a)})}scrollSection(e,t){var a;let s=null===(a=this.refScrollers[e])||void 0===a?void 0:a.current;s&&s.scrollTo({left:s.scrollLeft+t,behavior:"smooth"})}getDatasetIdsForSection(e){let t;let{catalogue:a}=this.props,s=a.foundset||{};switch(e){case j.CATALOGUE_SECTION_LAST_CHECKED:t=(0,v.UE)();break;case j.CATALOGUE_SECTION_FAVORITES:t=this.props.favoriteIds||[];break;default:t=a.sections[e]}return t?t=t.filter(e=>null!=s[e]):[]}constructor(...e){super(...e),this.state={showLogin:!1,facetsShownInMobile:!1,fullWidth:null,bodyWidth:null,isClientRendered:!1},this.isUnmounted=!1,this.refFullWidthMeasurer=l.createRef(),this.refBodyMeasurer=l.createRef(),this.refScrollers={},this.scrollPositions={},this.renderResultsRowSection=e=>{var t;let{bodyWidth:a}=this.state;if(null==a)return null;let i=this.getDatasetIdsForSection(e);if(null==i||!i.length)return null;let{narrow:r,cardWidth:c,gutter:d}=es(a),h=null!==(t=this.scrollPositions[e])&&void 0!==t?t:0,u=i.length,{intl:m}=this.props,x=(0,j.CATALOGUE_SECTION_NAMES)(m),p=e===j.CATALOGUE_SECTION_LAST_CHECKED,f=[m.$t({id:"catalogue.dragHorizHint1",defaultMessage:"To scroll horizontally, you can also:"}),"* "+m.$t({id:"catalogue.dragHorizHint2",defaultMessage:"Drag horizontally using the trackpad"}),"* "+m.$t({id:"catalogue.dragHorizHint3",defaultMessage:"Press Shift while using the mouse wheel"})].join("\n");this.refScrollers[e]||(this.refScrollers[e]=l.createRef());let v=this.refScrollers[e];return(0,s.jsxs)("div",{className:"jsx-".concat(eo.__hash)+" catalogue-row-section",children:[(0,s.jsxs)("div",{className:"jsx-".concat(eo.__hash)+" section-name",children:[x[e].toUpperCase(),p&&(0,s.jsx)("div",{onClick:this.onClickClearHistory,className:"jsx-".concat(eo.__hash)+" wk-button extra-small clear-history",children:(0,s.jsx)(o.A,{id:"catalogue.clearHistoryButton",defaultMessage:"Clear"})})]}),(0,s.jsx)("div",{className:"jsx-".concat(eo.__hash)+" section-content",children:(0,s.jsxs)("div",{ref:v,onScroll:this.onScroll,className:"jsx-".concat(eo.__hash)+" dataset-cards-wrapper wk-no-scrollbar",children:[(0,s.jsx)("div",{className:"jsx-".concat(eo.__hash)+" dataset-cards",children:i.map(e=>this.renderCard(e,r,{width:c}))}),(0,s.jsx)("div",{onClick:()=>this.scrollSection(e,-c-d),title:f,className:"jsx-".concat(eo.__hash)+" "+(b()("btn-scroll left",{shown:h>0})||""),children:(0,s.jsx)(g.Icon,{icon:"chevron-left"})}),(0,s.jsx)("div",{onClick:()=>this.scrollSection(e,+c+d),title:f,className:"jsx-".concat(eo.__hash)+" "+(b()("btn-scroll right",{shown:h+a<u*c+(u-1)*d})||""),children:(0,s.jsx)(g.Icon,{icon:"chevron-right"})})]})}),(0,s.jsx)(n(),{id:eo.__hash,children:eo})]},e)},this.onClickLogIn=()=>{let{standalone:e,router:t}=this.props;if(e){let e="/login",a={redirect:(0,w.zg)(t),...t.query};t.replace({pathname:e,query:a},{pathname:e,query:(0,w.$5)(a,t)},{shallow:!0})}else this.setState({showLogin:!0})},this.onClickClearFilters=()=>{let{facetValues:e,freeTextQuery:t}=this.props,{dateRangeQuery:a,elevationRangeQuery:s}=this.props;Object.keys(e).forEach(e=>this.props.setFacetValue(e,void 0)),t&&this.props.setFreeTextQuery(""),(a.begin||a.end||a.coverFull)&&this.props.setDateRangeQuery({begin:null,end:null,coverFull:!1}),(null!=s.begin||null!=s.end)&&this.props.setElevationRangeQuery({begin:null,end:null})},this.onClickClearHistory=()=>{(0,v.nr)(),this.forceUpdate()},this.onResize=()=>{var e,t,a,s;let i=null!==(a=null===(e=this.refBodyMeasurer.current)||void 0===e?void 0:e.clientWidth)&&void 0!==a?a:null;if(!i)return;let n=null!==(s=null===(t=this.refFullWidthMeasurer.current)||void 0===t?void 0:t.clientWidth)&&void 0!==s?s:null;n&&this.setState({bodyWidth:i,fullWidth:n})},this.onScroll=()=>{this.loadScrollFromNodes(),this.saveScrollToUrl()},this._saveScrollToUrl=()=>{if(this.isUnmounted)return;let{router:e}=this.props,{query:t}=e;j.CATALOGUE_SECTIONS.forEach(e=>{let a="_scrollLeft-".concat(e),s=this.scrollPositions[e];null!=s&&(t=s?(0,h.set)(t,a,String(s)):(0,h.omit)(t,a))}),t!==e.query&&(j.DEBUG.urlSync&&console.log("[URL] CatalogueListView calling router.replace",t),e.replace({query:t},{query:(0,w.$5)(t,e)},{shallow:!0})),this.debouncedForceUpdate()},this.saveScrollToUrl=m()(this._saveScrollToUrl,300,{leading:!1}),this.debouncedForceUpdate=p()(()=>{this.isUnmounted||this.forceUpdate()},1e3)}}let es=e=>{let t=e<=570,a=t?15:25,s=t?150:215,i=Math.floor((e-=a+.3*s)/(s+a));t&&i>2&&(i=2);let n=(e-a*(i-1))/i;return{numCards:i,cardWidth:n,narrow:t,gutter:a}},ei=new String(".content.jsx-9bd871281a5c2796{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}@media screen and (max-width:".concat(j.UI.narrowBreak,"px){.catalogue.jsx-9bd871281a5c2796{height:100%}}.perimeter-selector-narrow.jsx-9bd871281a5c2796{position:relative}.perimeter-selector-narrow.jsx-9bd871281a5c2796 .select-icon.jsx-9bd871281a5c2796{margin-left:.5em}.perimeter-selector-narrow.jsx-9bd871281a5c2796 select.jsx-9bd871281a5c2796{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.perimeter-item.jsx-9bd871281a5c2796{display:inline-block;cursor:pointer;margin:-.3em -webkit-calc(0px - var(--modal-padding));margin:-.3em -moz-calc(0px - var(--modal-padding));margin:-.3em calc(0px - var(--modal-padding));padding:.3em var(--modal-padding)-webkit-calc(.3em - 2px);padding:.3em var(--modal-padding)-moz-calc(.3em - 2px);padding:.3em var(--modal-padding)calc(.3em - 2px);border-bottom:2px solid transparent}.perimeter-item.jsx-9bd871281a5c2796+.perimeter-item.jsx-9bd871281a5c2796{margin-left:var(--modal-padding)}.perimeter-item.active.jsx-9bd871281a5c2796{border-bottom:2px solid black}"));ei.__hash="9bd871281a5c2796";let en=new String(".facets-click-target.jsx-dbcfa254eaa11cfc{position:fixed;z-index:1;top:0;left:0;right:0;bottom:0}.facets.jsx-dbcfa254eaa11cfc{-webkit-box-flex:0;-webkit-flex:0 0 ".concat(j.UI.facetSidebarWidth,"px;-moz-box-flex:0;-ms-flex:0 0 ").concat(j.UI.facetSidebarWidth,"px;flex:0 0 ").concat(j.UI.facetSidebarWidth,"px;padding-left:var(--modal-padding);padding-right:20px;margin-right:20px;border-right:1px solid var(--color-title-bg);padding-bottom:var(--modal-padding)}.facets.standalone.jsx-dbcfa254eaa11cfc{padding-left:0}.clear-filters.jsx-dbcfa254eaa11cfc{margin-left:.35em;color:var(--color-text-dim)}.mobile-title.jsx-dbcfa254eaa11cfc{display:none;margin-bottom:var(--modal-padding)}@media screen and (max-width:").concat(j.UI.narrowBreak,"px){.facets.jsx-dbcfa254eaa11cfc{-webkit-transition:all 200ms;-moz-transition:all 200ms;-o-transition:all 200ms;transition:all 200ms;position:fixed;padding-left:0;padding-right:0;margin-right:0;border-right:none;z-index:var(--z-facets-sidebar);top:0;height:100%;right:-webkit-calc(-10px - ").concat(j.UI.facetSidebarWidth+20,"px);right:-moz-calc(-10px - ").concat(j.UI.facetSidebarWidth+20,"px);right:calc(-10px - ").concat(j.UI.facetSidebarWidth+20,"px);width:").concat(j.UI.facetSidebarWidth+20,"px;background:white;border-left:1px solid var(--color-subtle-line);-webkit-border-bottom-left-radius:var(--border-radius);-moz-border-radius-bottomleft:var(--border-radius);border-bottom-left-radius:var(--border-radius);overflow:auto}.facets.shown-sidebar.jsx-dbcfa254eaa11cfc{right:0}.mobile-title.jsx-dbcfa254eaa11cfc{display:block}.mobile-title-content.jsx-dbcfa254eaa11cfc{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.facets.jsx-dbcfa254eaa11cfc h3.jsx-dbcfa254eaa11cfc{display:none}.facets-content.jsx-dbcfa254eaa11cfc{margin:0 var(--modal-padding)var(--modal-padding)}}"));en.__hash="dbcfa254eaa11cfc";let el=new String(".results.jsx-6870e23ebea043e9{-webkit-box-flex:1;-webkit-flex:1 1 0px;-moz-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0px;overflow-x:hidden}.results-title.jsx-6870e23ebea043e9{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.num-results.jsx-6870e23ebea043e9{margin-left:.35em;margin-right:.1em;color:var(--color-dim)}.num-results.fix-width.jsx-6870e23ebea043e9{width:2em}.num-external.jsx-6870e23ebea043e9{position:relative;margin-left:.35em}.num-external.jsx-6870e23ebea043e9 .wk-icon-button{color:var(--color-dim);opacity:.5}.in-perimeter.jsx-6870e23ebea043e9{font-weight:normal;margin-left:1em}.inline-perimeter-selector.jsx-6870e23ebea043e9{font-weight:bold}.inline-perimeter-selector.jsx-6870e23ebea043e9 .select-icon{color:var(--color-dim);-webkit-transition:color ".concat(j.UI.transitionDuration,"ms;-moz-transition:color ").concat(j.UI.transitionDuration,"ms;-o-transition:color ").concat(j.UI.transitionDuration,"ms;transition:color ").concat(j.UI.transitionDuration,"ms}.inline-perimeter-selector.jsx-6870e23ebea043e9:hover .select-icon{color:inherit}.mobile-filters-button.jsx-6870e23ebea043e9{position:relative;left:3px;display:none}@media screen and (max-width:").concat(j.UI.narrowBreak,"px){.results.standalone.jsx-6870e23ebea043e9{margin-left:-webkit-calc(0px - var(--modal-padding));margin-left:-moz-calc(0px - var(--modal-padding));margin-left:calc(0px - var(--modal-padding));margin-right:-webkit-calc(0px - var(--modal-padding));margin-right:-moz-calc(0px - var(--modal-padding));margin-right:calc(0px - var(--modal-padding))}.results-title.jsx-6870e23ebea043e9{padding:0 var(--modal-padding)}.mobile-filters-button.jsx-6870e23ebea043e9{display:inline;cursor:pointer}}@media screen and (max-width:600px){.in-perimeter.jsx-6870e23ebea043e9{display:block;margin-left:0}}.indication.jsx-6870e23ebea043e9{color:var(--color-form-error)}.log-in.jsx-6870e23ebea043e9{margin:40px;text-align:center}"));el.__hash="6870e23ebea043e9";let er=new String(".dataset-cards.jsx-a71148081461d268{display:grid;margin-right:var(--modal-padding);margin-bottom:var(--modal-padding);gap:".concat(25,"px;grid-template-columns:repeat(auto-fill,minmax(").concat(215,"px,1fr))}.dataset-cards.narrow.jsx-a71148081461d268{gap:").concat(15,"px;grid-template-columns:repeat(auto-fill,minmax(").concat(150,"px,1fr))}@media screen and (max-width:").concat(j.UI.narrowBreak,"px){.dataset-cards.jsx-a71148081461d268{margin-left:var(--modal-padding)}}"));er.__hash="a71148081461d268";let eo=new String(".catalogue-sections.jsx-ec2242bf89101872{margin-bottom:var(--modal-padding)}.catalogue-row-section.jsx-ec2242bf89101872+.catalogue-row-section.jsx-ec2242bf89101872{margin-top:40px}.section-name.jsx-ec2242bf89101872{color:black;letter-spacing:1.3px;font-size:.8rem;margin-bottom:.2em}.section-content.jsx-ec2242bf89101872{position:relative}.dataset-cards-wrapper.jsx-ec2242bf89101872{overflow-x:auto;padding-right:var(--modal-padding)}.dataset-cards.jsx-ec2242bf89101872{width:-webkit-max-content;width:-moz-max-content;width:max-content}.catalogue-row-section.jsx-ec2242bf89101872 .dataset-card{display:inline-block;width:230px}.catalogue-row-section.jsx-ec2242bf89101872 .dataset-card+.dataset-card{margin-left:".concat(25,"px}.catalogue-row-section.jsx-ec2242bf89101872 .dataset-card.narrow+.dataset-card.narrow{margin-left:").concat(15,"px}.clear-history.jsx-ec2242bf89101872{opacity:0;pointer-events:none;margin-left:1em;letter-spacing:normal;line-height:1}.catalogue-row-section.jsx-ec2242bf89101872:hover .clear-history.jsx-ec2242bf89101872{opacity:1;pointer-events:all}.btn-scroll.jsx-ec2242bf89101872{position:absolute;top:").concat(60,"px;opacity:0;pointer-events:none;background:white;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:").concat(40,"px;height:").concat(40,"px;-webkit-border-radius:").concat(20,"px;-moz-border-radius:").concat(20,"px;border-radius:").concat(20,"px;border:1px solid black;-webkit-transition:opacity ").concat(j.UI.transitionDuration,"ms;-moz-transition:opacity ").concat(j.UI.transitionDuration,"ms;-o-transition:opacity ").concat(j.UI.transitionDuration,"ms;transition:opacity ").concat(j.UI.transitionDuration,"ms;-webkit-box-shadow:0 0 2px 3px rgba(0,0,0,.2);-moz-box-shadow:0 0 2px 3px rgba(0,0,0,.2);box-shadow:0 0 2px 3px rgba(0,0,0,.2)}.btn-scroll.left.jsx-ec2242bf89101872{left:4px}.btn-scroll.right.jsx-ec2242bf89101872{right:4px}@media(hover:hover){.section-content.jsx-ec2242bf89101872:hover .btn-scroll.shown.jsx-ec2242bf89101872{opacity:1;pointer-events:all;cursor:pointer}}@media screen and (max-width:").concat(j.UI.narrowBreak,"px){.section-name.jsx-ec2242bf89101872{padding-left:var(--modal-padding)}.dataset-cards-wrapper.jsx-ec2242bf89101872{padding-left:var(--modal-padding);padding-right:var(--modal-padding)}}"));eo.__hash="ec2242bf89101872";let ec=(0,d.withRouter)((0,r.Ng)(e=>({loginStatus:(0,k.iN)(e),freeTextQuery:(0,k.uR)(e),dateRangeQuery:(0,k.wn)(e),elevationRangeQuery:(0,k.Je)(e),facetValues:(0,k.iw)(e),catalogue:(0,k.o$)(e),perimeter:(0,k.U)(e),favoriteIds:(0,k.ZL)(e),hasCatalogueFilter:(0,k.iC)(e)}),N)((0,c.Ay)(ea)))},50289:(e,t,a)=>{a.d(t,{A:()=>j});var s=a(31085),i=a(93243),n=a.n(i),l=a(14041),r=a(31242),o=a(70541),c=a(8867),d=a(99870),h=a.n(d),u=a(20409),m=a(55065),x=a(81864),p=a(88358),f=a(83832),b=a(20084);let g=new String("");g.__hash="b3e1b6a7c9b96113";let j=e=>{let t=(0,c.A)(),[a,i]=l.useState(!1),d=(0,r.useRouter)(),j=(0,o.d4)(f.iN),v=(0,o.wA)(),_=()=>{let{standalone:t,dataset:a,isFavorite:s}=e;if("LOGGED_IN"!==j){if(t){let e="/login",t={redirect:(0,p.zg)(d),...d.query};d.replace({pathname:e,query:t},{pathname:e,query:(0,p.$5)(t,d)},{shallow:!0})}else i(!0);return}v(s?(0,x.unfavorite)(a.id):(0,x.favorite)(a.id))},w=()=>{i(!1)};return(()=>{if(m.APP_CONFIG.noAuth)return null;let{isFavorite:i}=e;return(0,s.jsxs)("span",{title:i?t.$t({id:"favoriteStar.unfavorite",defaultMessage:"Remove from favourites"}):t.$t({id:"favoriteStar.favorite",defaultMessage:"Add to favourites"}),"data-sentry-component":"render","data-sentry-source-file":"900-FavoriteStar.tsx",className:"jsx-".concat(g.__hash)+" "+(h()("wk-icon-button favorite",{active:i})||""),children:[(0,s.jsx)(u.Icon,{icon:"star",family:i?"fas":"far",onClick:_,"data-sentry-element":"Icon","data-sentry-source-file":"900-FavoriteStar.tsx"}),a&&(0,s.jsx)(b.A,{onClose:w}),(0,s.jsx)(n(),{id:g.__hash,children:g})]})})()}},71198:(e,t,a)=>{a.d(t,{A:()=>N});var s=a(31085),i=a(93243),n=a.n(i),l=a(14041),r=a(64104),o=a(8953),c=a(82989),d=a(99870),h=a.n(d),u=a(20409),m=a(37715),x=a(55065),p=a(7859),f=a(49608),b=a(94631),g=a(36744);let j={basemap:x.BASEMAPS.bathymetry.layer},v=x.UI.zoomLimits[0];class _ extends l.Component{render(){var e;let{dataset:t}=this.props;this.src=null!==(e=t.omiFigureUrl)&&void 0!==e?e:t.thumbnailUrl;let a=!this.src||this.state.errored;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.pL,{"data-sentry-element":"InView","data-sentry-source-file":"910-Thumbnail.tsx",children:this.renderImage}),a&&(0,s.jsx)(y,{}),(0,s.jsx)(n(),{id:k.__hash,children:k})]})}constructor(...e){super(...e),this.state={errored:!1},this.isShown=!1,this.renderImage=e=>{let{inView:t,ref:a}=e,{src:i}=this,n=this.isShown||t;this.isShown=n;let l=!i||this.state.errored;return(0,s.jsx)("img",{className:h()("thumbnail-image",{errored:l}),ref:a,src:l?"/images/transparent-pixel.png":n?i:void 0,onError:this.onError,alt:""})},this.onError=()=>{this.setState({errored:!0})}}}let w=e=>{let[t,a]=(0,l.useState)(null),[i,r]=(0,l.useState)(null),o=(0,l.createRef)(),d=(0,l.createRef)();(0,l.useEffect)(()=>{let e=new ResizeObserver(E);return d.current=e,e.observe(o.current),()=>{e.disconnect()}},[]);let{dataset:h}=e,[u,f]=(0,l.useState)(null),[g,_]=(0,l.useState)(null),[w,y]=(0,l.useState)(null),[N,S]=(0,l.useState)();(0,l.useEffect)(()=>{if(null==t||null==i)return;let e=(0,b.A)(h,t,i,{margin:40});f(e.crs),_(e.center),y(Math.max(Math.min(e.zoom,11.5),v))},[h,t,i]);let C=()=>null==t||null==i||null==u||null==g||null==w?null:(0,s.jsx)(c.default,{width:t,height:i,crs:u,center:g,zoom:w,layers:j,visibleExtentLimits:x.UI.visibleExtentLimits[u],zoomLimits:N,onDragStartMap:()=>{},onDragEndMap:()=>{},onInitialPanZoomKnown:(e,t)=>{S([t,t])},"data-sentry-element":"Map2d","data-sentry-component":"renderMap","data-sentry-source-file":"910-Thumbnail.tsx",children:A}),A=e=>{let{variableProjection:a}=e;if(null==t||null==i)return null;let l=h.stacOrCswBbox;if(!l)return null;let[r,o,c,d]=l,u=(0,p.OA)([r,o],[c,d]).map(a),m="M".concat(u.join("L"),"Z");return(0,s.jsxs)("svg",{width:t,height:i,"data-sentry-element":"svg","data-sentry-component":"renderMapTopLayer","data-sentry-source-file":"910-Thumbnail.tsx",className:"jsx-".concat(k.__hash),children:[(0,s.jsx)("path",{d:m,"data-sentry-element":"path","data-sentry-source-file":"910-Thumbnail.tsx",className:"jsx-".concat(k.__hash)+" bbox-line"}),(0,s.jsx)(n(),{id:k.__hash,children:k})]})},E=e=>{let s=e[0];if(!s)return;let{width:n,height:l}=s.contentRect;n!==t&&a(n),l!==i&&r(l)};return(0,s.jsxs)("div",{ref:o,"data-sentry-component":"render","data-sentry-source-file":"910-Thumbnail.tsx",className:"jsx-".concat(k.__hash)+" thumbnail-map",children:[(0,s.jsx)(m.pL,{"data-sentry-element":"InView","data-sentry-source-file":"910-Thumbnail.tsx",children:e=>{let{inView:t,ref:a}=e;return(0,s.jsxs)("div",{ref:a,"data-sentry-component":"renderMapWrapper","data-sentry-source-file":"910-Thumbnail.tsx",className:"jsx-".concat(k.__hash)+" map-outer",children:[t&&C(),(0,s.jsx)(n(),{id:k.__hash,children:k})]})}}),(0,s.jsx)(n(),{id:k.__hash,children:k})]})},y=()=>(0,s.jsxs)("div",{"data-sentry-component":"ThumbnailNone","data-sentry-source-file":"910-Thumbnail.tsx",className:"jsx-".concat(k.__hash)+" error",children:[(0,s.jsx)("div",{className:"jsx-".concat(k.__hash)+" icon",children:(0,s.jsx)(u.Icon,{icon:"image",family:"far","data-sentry-element":"Icon","data-sentry-source-file":"910-Thumbnail.tsx"})}),(0,s.jsx)("div",{className:"jsx-".concat(k.__hash),children:(0,s.jsx)(r.A,{id:"thumbnail.none",defaultMessage:"No thumbnail","data-sentry-element":"FormattedMessage","data-sentry-source-file":"910-Thumbnail.tsx"})}),(0,s.jsx)(n(),{id:k.__hash,children:k})]}),k=new String(".thumbnail.jsx-4452f676e95e1604{position:relative;width:150px;height:150px}.thumbnail.large.jsx-4452f676e95e1604{width:100%;height:170px}.thumbnail.auto-size.jsx-4452f676e95e1604{width:100%;height:100%}.thumbnail.jsx-4452f676e95e1604 .thumbnail-image{display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.thumbnail-image.errored{border:1px solid#ddd}@media screen and (max-width:".concat(x.UI.narrowBreak,"px){.thumbnail.jsx-4452f676e95e1604:not(.auto-size),.thumbnail.large.jsx-4452f676e95e1604:not(.auto-size){width:110px;height:110px}}.error.jsx-4452f676e95e1604{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:var(--color-dim);border:1px solid#ddd}.error.jsx-4452f676e95e1604 .icon.jsx-4452f676e95e1604{font-size:2em}.thumbnail-map.jsx-4452f676e95e1604{height:100%}.map-outer.jsx-4452f676e95e1604{height:100%}.bbox-line.jsx-4452f676e95e1604{stroke:black;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;fill:none;pointer-events:none}"));k.__hash="4452f676e95e1604";let N=(0,o.Ay)(e=>{let t=()=>{var t;let{dataset:a}=e;return(null!==(t=a.omiFigureUrl)&&void 0!==t?t:a.thumbnailUrl)?(0,s.jsx)(_,{...e}):a.catalogue===x.USER_CATALOGUE?(0,s.jsx)(w,{...e}):(0,s.jsx)(y,{"data-sentry-element":"ThumbnailNone","data-sentry-component":"renderContent","data-sentry-source-file":"910-Thumbnail.tsx"})},a=()=>{var t,a;let{dataset:i}=e;if((0,f.o7)(i))return null;let{thumbnailMeta:n,sources:l}=i,r=null!==(t=null==n?void 0:n.overlays)&&void 0!==t?t:{tags:[]},o=i.catalogue===x.USER_CATALOGUE?"bathymetry":null!==(a=null==n?void 0:n.basemapId)&&void 0!==a?a:"light";return(0,s.jsx)(g.A,{basemapId:o,overlays:r,sources:l,externalSourceShort:i.externalSourceShort,"data-sentry-element":"ThumbnailOverlays","data-sentry-component":"renderOverlays","data-sentry-source-file":"910-Thumbnail.tsx"})};return(()=>{let{large:i,autoSize:l}=e;return(0,s.jsxs)("div",{"data-sentry-component":"render","data-sentry-source-file":"910-Thumbnail.tsx",className:"jsx-".concat(k.__hash)+" "+(h()("thumbnail",{large:i,"auto-size":l})||""),children:[t(),a(),(0,s.jsx)(n(),{id:k.__hash,children:k})]})})()})},36744:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(31085),i=a(93243),n=a.n(i);a(14041);var l=a(8867),r=a(99870),o=a.n(r),c=a(58657),d=a(49608);let h={"Numerical models":"world","In-situ observations":"buoy","Satellite observations":"satellite","AI forecast":"sparkles"},u=new String(".tags.jsx-867e94ece118de1f{position:absolute;top:0;left:0;max-width:100%;color:white;overflow:hidden;background:rgba(0,0,0,.6);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;font-size:.8rem}.tags.large.jsx-867e94ece118de1f{font-size:1.2rem}.tag.jsx-867e94ece118de1f{}.tag.tag-with-img.jsx-867e94ece118de1f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:2px 5px}.tag-with-text.jsx-867e94ece118de1f{padding:2px 5px}.tag-img.jsx-867e94ece118de1f{display:block;height:1.3em}.tag.jsx-867e94ece118de1f+.tag.jsx-867e94ece118de1f{border-left:1px solid white}.border.jsx-867e94ece118de1f{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}");u.__hash="867e94ece118de1f";let m=e=>{let t=(0,l.A)();return(0,s.jsxs)(s.Fragment,{children:[(()=>{let{overlays:a,large:i,externalSourceShort:l}=e,r=(e.sources||[]).map(e=>({name:e,icon:h[e]})).filter(e=>null!=e.icon),{tags:c}=a;return(c=c.filter(e=>!!e.name),l&&c.unshift({name:l}),c.length||r.length)?(0,s.jsxs)("div",{"data-sentry-component":"renderTags","data-sentry-source-file":"911-ThumbnailOverlays.tsx",className:"jsx-".concat(u.__hash)+" "+(o()("tags",{large:i})||""),children:[r.map(e=>{let{name:a,icon:i}=e;return(0,s.jsx)("span",{title:(0,d.JI)(t,a),className:"jsx-".concat(u.__hash)+" tag tag-with-img",children:(0,s.jsx)("img",{src:"/images/icon-".concat(i,".svg"),alt:"",className:"jsx-".concat(u.__hash)+" tag-img"})},a)}),c.map((e,t)=>{let{name:a}=e;return(0,s.jsx)("span",{className:"jsx-".concat(u.__hash)+" tag tag-with-text",children:a},"tag-".concat(t))}),(0,s.jsx)(n(),{id:u.__hash,children:u})]}):null})(),(()=>{var t;let{basemapId:a}=e,{thumbnailBorder:i}=null!==(t=c.tt[a])&&void 0!==t?t:c.tt[c.wd];return(0,s.jsx)("div",{style:{border:i},"data-sentry-component":"renderBorder","data-sentry-source-file":"911-ThumbnailOverlays.tsx",className:"jsx-".concat(u.__hash)+" border",children:(0,s.jsx)(n(),{id:u.__hash,children:u})})})()]})}},20084:(e,t,a)=>{a.d(t,{A:()=>x});var s=a(31085),i=a(93243),n=a.n(i),l=a(14041),r=a(70541),o=a(81864),c=a(83832),d=a(85317),h=a(59916),u=a(90484);let m=new String(".wk-modal-login .wk-modal-inner{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.modal-login-content.jsx-13202f11c074d7ab{margin:var(--modal-padding)}");m.__hash="13202f11c074d7ab";let x=e=>{let t=(0,r.wA)(),a=(0,r.d4)(c.iN),[i,x]=(0,l.useState)("Log in");return(0,l.useEffect)(()=>(t((0,o.modalOpen)("login")),()=>{t((0,o.modalClose)("login"))}),[]),(0,l.useEffect)(()=>{var t;"LOGGED_IN"===a&&(null===(t=e.onClose)||void 0===t||t.call(e))}),(()=>{let{initialForm:t,onClose:a}=e;return(0,s.jsxs)(d.A,{className:"wk-modal-login",onClose:a,"data-sentry-element":"Modal","data-sentry-component":"render","data-sentry-source-file":"100-LoginModal.tsx",children:[(0,s.jsx)(h.A,{title:i,onClickBack:a,"data-sentry-element":"TitleRow","data-sentry-source-file":"100-LoginModal.tsx"}),(0,s.jsx)("div",{className:"jsx-".concat(m.__hash)+" modal-login-content",children:(0,s.jsx)(u.A,{initialForm:t,setTitle:x,onSuccess:a,"data-sentry-element":"LoginForm","data-sentry-source-file":"100-LoginModal.tsx"})}),(0,s.jsx)(n(),{id:m.__hash,children:m})]})})()}},41821:(e,t,a)=>{a.d(t,{RH:()=>n,jr:()=>i,yp:()=>l});var s=a(20409);let i=(e,t,a)=>{e.ctrlKey||e.altKey||e.metaKey||("Enter"===e.key&&(t(e),(0,s.cancelEvent)(e)),"Escape"===e.key&&(e.target.value=a,(0,s.cancelEvent)(e)))},n=e=>{let{onMove:t,onEnd:a,initialEvent:i}=e,n=e=>{let{clientX:a,clientY:i}=e;null!=a&&null!=i&&(t({clientX:a,clientY:i,event:e}),(0,s.cancelEvent)(e))},l=e=>{let{targetTouches:a}=e;if(!a||!a.length)return;let{clientX:i,clientY:n}=a[0];null!=i&&null!=n&&(t({clientX:i,clientY:n,event:e}),(0,s.cancelEvent)(e))},r=()=>{a&&a();try{document.body&&document.body.classList.remove("dragging"),window.removeEventListener("mousemove",n),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r),window.removeEventListener("touchleave",r),window.removeEventListener("touchcancel",r)}catch(e){}};try{window.addEventListener("mousemove",n),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("mouseup",r),window.addEventListener("touchend",r),window.addEventListener("touchleave",r),window.addEventListener("touchcancel",r),document.body&&document.body.classList.add("dragging")}catch(e){}return i&&("mousedown"===i.type&&n(i),"touchstart"===i.type&&l(i)),r},l=async e=>{await navigator.clipboard.writeText(window.location.href),(0,s.notify)({type:"success",title:e.$t({id:"notif.copyUrlSuccess",defaultMessage:"Copied URL to your clipboard!"}),icon:"share-alt"})}},94631:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(18798),i=a(7859),n=a(55065);let l="Global Ocean",r={"Arctic Ocean":{crs:"epsg:32661",center:[0,90],zoom:11},"Antarctic Ocean":{crs:"epsg:32761",center:[0,-90],zoom:11},"Mediterranean Sea":{crs:"epsg:4326",center:[14.326,37.638],zoom:11.7},"Atlantic: Iberia-Biscay-Ireland":{crs:"epsg:4326",center:[-5.7589,41.224],zoom:11.32},"Atlantic: NW European Shelf":{crs:"epsg:4326",center:[-.7654,54.3405],zoom:12.09},"Atlantic: North":{crs:"epsg:4326",center:[-16.8558,43.0527],zoom:10.33},"Baltic Sea":{crs:"epsg:32661",center:[18.231,58.9698],zoom:12.39},"Black Sea":{crs:"epsg:4326",center:[34.3884,43.3465],zoom:13.03},[l]:{crs:"epsg:4326",center:[0,0],zoom:8}},o={SEAICE_ARC_SEAICE_L4_NRT_OBSERVATIONS_011_007:!0},c=function(e,t,a){var l,r,c,h,u,m,x,p,f;let b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},g=null!==(h=null===(l=e.layers)||void 0===l?void 0:l[null!==(c=b.layerId)&&void 0!==c?c:"--"])&&void 0!==h?h:null,j=(null==g?void 0:null===(r=g.stacItem)||void 0===r?void 0:r.bbox)||(0,i.QQ)(e,null!==(u=b.useHeuristics)&&void 0!==u&&u);if(!j)return d(e);let v=j[1],_=j[3],w={margin:null!==(m=b.margin)&&void 0!==m?m:10,cover:b.allowCoverExceptions?null!==(p=null!==(x=o[e.id])&&void 0!==x?x:b.cover)&&void 0!==p&&p:null!==(f=b.cover)&&void 0!==f&&f},y=g?g.supportsPolarProjections:"object"!=typeof e.layers||Object.values(e.layers).every(e=>e.supportsPolarProjections);if(y&&v>=-5&&_>=89){let e="epsg:32661",{center:i,zoom:n}=(0,s.lineStringToCenterZoom)([[0,v],[90,v],[180,v],[-90,v]],e,t,a,w);return{crs:e,center:i,zoom:n}}if(y&&_<=5&&v<=-89){let e="epsg:32761",{center:i,zoom:n}=(0,s.lineStringToCenterZoom)([[0,_],[90,_],[180,_],[-90,_]],e,t,a,w);return{crs:e,center:i,zoom:n}}let k=n.UI.defaultCrs,{center:N,zoom:S}=(0,s.bboxToCenterZoom)(j,k,t,a,w);return{crs:k,center:N,zoom:S}},d=e=>{var t;let a=null!==(t=null==e?void 0:e.areas)&&void 0!==t?t:[];if(a.length>3)return r[l];if(a.includes("Atlantic: NW European Shelf"))return r["Atlantic: NW European Shelf"];if(a.includes("Atlantic: Iberia-Biscay-Ireland"))return r["Atlantic: Iberia-Biscay-Ireland"];for(let e=0;e<a.length;e++){let t=a[e];if(t===l)continue;let s=r[t];if(s)return s}return r[l]}}}]);